"use strict";const{app:r,BrowserWindow:a,screen:h,ipcMain:f}=require("electron"),s=require("node:path"),u=require("fs");process.platform==="linux"&&(r.commandLine.appendSwitch("enable-transparent-visuals"),r.disableHardwareAcceleration());const t=()=>{const l=h.getPrimaryDisplay(),{width:d,height:c}=l.size,e=new a({width:d,height:c,x:0,y:0,backgroundColor:"#00000000",transparent:!0,alwaysOnTop:!0,resizable:!1,frame:!1,thickFrame:!1,hasShadow:!1,skipTaskbar:!0,hiddenInMissionControl:!0,type:"toolbar",fullscreen:!1,visibleOnFullScreen:!0,webPreferences:{preload:s.join(__dirname,"preload.js"),devTools:!1},show:!1});process.platform!=="linux"&&e.setFullScreen(!0),e.setIgnoreMouseEvents(!0,{forward:!0});const p=process.platform==="linux"?300:0;e.once("ready-to-show",()=>{setTimeout(()=>{e.show()},p)}),f.handle("set-ignore-mouse-events",(n,o,i)=>{e.setIgnoreMouseEvents(o,{forward:i||!1})});try{e.setVisibleOnAllWorkspaces(!0,{visibleOnFullScreen:!0})}catch{}if(!r.isPackaged||process.env.NODE_ENV==="development")e.loadURL("http://localhost:5173");else{const n=[s.join(__dirname,"../renderer/main_window/index.html"),s.join(__dirname,"../.vite/renderer/main_window/index.html"),s.join(process.resourcesPath,"app/.vite/renderer/main_window/index.html"),s.join(process.resourcesPath,"app/renderer/main_window/index.html")];let o=!1;for(const i of n)try{if(u.existsSync(i)){e.loadFile(i),o=!0;break}}catch{}o||console.error("Could not find renderer HTML file. Tried paths:",n)}};r.whenReady().then(()=>{process.platform==="darwin"&&r.dock.hide(),t(),r.on("activate",()=>{a.getAllWindows().length===0&&t()})});r.on("window-all-closed",()=>{process.platform!=="darwin"&&r.quit()});
